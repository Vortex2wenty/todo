(()=>{"use strict";const e=(e,t=[])=>({addTodo:(e,o,d="",n=0,r="")=>{t.push(((e,t,o="",d=0,n="")=>{let r=!1;return{title:e,description:t,dueDate:o,priority:d,comment:n,toggleComplete:()=>{r=!r}}})(e,o,d,n,r))},getTodos:()=>t,editTodo:(e,o,d,n="",r=0,i="")=>{t[e].title=o,t[e].description=d,t[e].dueDate=n,t[e].priority=r,t[e].comment=i},deleteTodo:e=>{delete t[e]},getTitle:()=>e}),t=(()=>{let t=[];const o=e("Default");let d,n=[];const r=()=>{let o=[];for(const e of t){let t={title:e.getTitle(),todos:e.getTodos()};o.push(t)}localStorage.getItem("projects")?(n=JSON.parse(localStorage.getItem("projects")),localStorage.setItem("projects",localStorage.getItem("projects").concat(JSON.stringify(o))),n=JSON.parse(localStorage.getItem("projects")),t=[],n.forEach(((o,d)=>{let n=e(o.title);i(n),o.todos.forEach((e=>{null!==e&&t[d].addTodo(e.title,e.description,new Date(e.dueDate),e.priority,e.comment)}))}))):localStorage.setItem("projects",JSON.stringify(o))},i=e=>{t.push(e)},a=()=>{r();const e=document.querySelector(".projects-list");e.innerHTML="",t.forEach(((t,o)=>{const d=document.createElement("li");d.classList.add("nav-item");const n=document.createElement("a");n.textContent=t.title,n.classList.add("nav-link"),n.setAttribute("href","#"),d.appendChild(n),n.addEventListener("click",(()=>{c(o)})),e.appendChild(d)}))},c=e=>{const o=document.querySelector(".todos-list");o.innerHTML="",d=e,t[e].getTodos().forEach(((e,n)=>{const i=document.createElement("li");let a;a=0===e.priority?"alert-light":1===e.priority?"alert-info":2===e.priority?"alert-warning":"alert-danger",i.classList.add("nav-item","alert",a);const l=document.createElement("a");l.classList.add("d-inline-block"),l.textContent=e.title,l.classList.add("nav-link"),l.setAttribute("href","#"),l.setAttribute("data-bs-toggle","modal"),l.setAttribute("data-bs-target","#showTodoModal");const u=document.createElement("a");u.setAttribute("href","#"),u.classList.add("d-inline-block","float-end"),u.setAttribute("data-bs-toggle","modal"),u.setAttribute("data-bs-target","#editTodoModal");const s=document.createElement("i");s.classList.add("bi","bi-three-dots-vertical");const m=document.createElement("a");m.setAttribute("href","#"),m.classList.add("d-inline-block","float-end","me-1");const p=document.createElement("i");p.classList.add("bi","bi-archive"),u.appendChild(s),m.appendChild(p),i.appendChild(l),i.appendChild(u),i.appendChild(m),o.appendChild(i),i.addEventListener("click",(t=>{const o=document.querySelector("#showTodoModal");o.querySelector(".modal-title").textContent=e.title;const d=document.createElement("h3");d.textContent=`Description: ${e.description}`;const n=document.createElement("h3");n.textContent=`Due: ${e.dueDate.toUTCString()}`;const r=document.createElement("h3");r.textContent=`Priority: ${e.priority}`,r.classList.add(a);const i=document.createElement("h3");i.textContent=`Comment: ${e.comment}`;const c=o.querySelector(".modal-body");c.textContent="",c.appendChild(d),c.appendChild(n),c.appendChild(r),c.appendChild(i)})),u.addEventListener("click",(o=>{(e=>{const o=document.querySelector(".form-edit-todo");o.addEventListener("input",(e=>{document.querySelector("#edit-todo-priority-output").value=document.querySelector("#edit-todo-priority").value}));const n=document.querySelector("#editTodoModal");n.querySelector("#edit-todo-name").value=e.title,n.querySelector("#edit-todo-description").value=e.description,n.querySelector("#edit-todo-duedate").value=`${e.dueDate.getUTCFullYear()}-${e.dueDate.getUTCMonth()<10?"0"+[e.dueDate.getUTCMonth()+1]:e.dueDate.getUTCMonth()+1}-${e.dueDate.getUTCDate()}`,n.querySelector("#edit-todo-priority").value=e.priority,n.querySelector("#edit-todo-priority-output").textContent=e.priority,n.querySelector("#edit-todo-comment").value=e.comment,o.addEventListener("submit",(o=>{o.preventDefault();const n=[t[d].getTodos().indexOf(e),document.querySelector("#edit-todo-name").value,document.querySelector("#edit-todo-description").value,document.querySelector("#edit-todo-duedate").valueAsDate,+document.querySelector("#edit-todo-priority").value,document.querySelector("#edit-todo-comment").value];t[d].editTodo(...n),r(),c(d)}))})(e)})),m.addEventListener("click",(e=>{t[d].deleteTodo(n),r(),c(d)}))}))};return{init:()=>{r(),document.querySelector(".form-add-project").addEventListener("submit",(t=>{t.preventDefault();const o=e(document.querySelector("#add-project-name").value);i(o),r(),a()})),(()=>{const e=document.querySelector(".form-add-todo");e.addEventListener("input",(e=>{document.querySelector("#todo-priority-output").value=document.querySelector("#add-todo-priority").value})),e.addEventListener("submit",(e=>{e.preventDefault();const o=[document.querySelector("#add-todo-name").value,document.querySelector("#add-todo-description").value,document.querySelector("#add-todo-duedate").valueAsDate,+document.querySelector("#add-todo-priority").value,document.querySelector("#add-todo-comment").value];t[d].addTodo(...o),r(),c(d)}))})(),o.addTodo("Test","This is a test todo!",new Date,1,"A comment on the todo!"),i(o),a(),c(t.indexOf(o))},defaultProject:o}})();document.addEventListener("DOMContentLoaded",(()=>{t.init(),console.log(t),console.log(t.defaultProject.getTodos())}))})();